<div class="page-container-full animated fadeIn">

  <div class="xl my-4 text-accent">
    <span class="mdi mdi-hand mr-2"></span>
    Hola {{ loginService?.user.tx_name }}
  </div>

  <div class="minicards-content">

    <div>

      <!-- STATUS  -->
      <mat-card class="saturno-minicard text-left mb-2 mx-1 pointer">

        <div class="text-info text-left md">
          <span class="mdi mdi-cogs mr-2"></span> Estado
        </div>


        <div class="text-center">

          <!-- loading -->
          <div *ngIf="adminService.loading">
            <app-spinner text="LOADING DATA..."></app-spinner>
          </div>

          <!-- loaded -->
          <div *ngIf="!adminService.loading" class="animated fadeIn">
            <div *ngIf="adminService.companies.length === 0 || 
                   adminService.sections.length === 0 || 
                   adminService.tables.length === 0">
              <div class="mdi mdi-close-circle-outline text-danger text-center xxxxl"></div>
              <div *ngIf="adminService.companies.length === 0" class="sm text-accent">
                Todavía no hay comercios creados.
              </div>
              <div *ngIf="adminService.sections.length === 0" class="sm text-accent">
                Todavía no hay sectores creados.
              </div>
              <div *ngIf="adminService.tables.length === 0" class="sm text-accent">
                Todavía no hay mesas creadas.
              </div>
              <hr>
              <button mat-raised-button color="accent" routerLink="/admin/wizard">Iniciar Asistente</button>
            </div>
            <div *ngIf="adminService.companies.length > 0 && 
            adminService.sections.length > 0 && 
            adminService.tables.length > 0">
              <div class="mdi mdi-check-circle-outline text-active text-center xxxxl"></div>
              <div>
                Todo esta en orden.
              </div>
              <hr>
              <button mat-raised-button color="active" routerLink="/waiter/home">Entrar a un Sector</button>
            </div>
          </div>

        </div>

      </mat-card>

      <!-- COMPANY TABLE INFO -->
      <mat-card class="saturno-minicard text-left mb-2 mx-1 pointer">

        <div class="text-info text-left md">
          <span class="mdi mdi-storefront mr-2"></span> {{ this.loginService.user.id_company?.tx_company_name || 'No
          creaste ningún comercio' }}
        </div>

        <mat-card-content>

          <div class="table-responsive-sm mt-2">
            <table class="table-sm mb-0 sm text-center">

              <tr>
                <td class="text-left">
                  <span class="mdi mdi-storefront mr-2"></span>
                  Bares / Restaurantes
                  <span *ngIf="adminService.companies.length > 0" class="mdi mdi-check text-success"></span>
                  <span *ngIf="adminService.companies.length === 0" class="mdi mdi-alert text-danger"></span>
                </td>
                <td class="text-right text-accent">
                  {{ adminService.companies.length }}
                </td>
              </tr>

              <tr>
                <td class="text-left">
                  <span class="mdi mdi-select-group mr-2"></span>
                  Sectores
                  <span *ngIf="adminService.sections.length > 0" class="mdi mdi-check text-success"></span>
                  <span *ngIf="adminService.sections.length === 0" class="mdi mdi-alert text-danger"></span>
                </td>
                <td class="text-right text-accent">
                  {{ adminService.sections.length }}
                </td>
              </tr>

              <tr>
                <td class="text-left">
                  <span class="mdi mdi-silverware-fork-knife mr-2"></span>
                  Mesas
                  <span *ngIf="adminService.tables.length > 0" class="mdi mdi-check text-success"></span>
                  <span *ngIf="adminService.tables.length === 0" class="mdi mdi-alert text-danger"></span>
                </td>
                <td class="text-right text-accent">
                  {{ adminService.tables.length }}
                </td>
              </tr>

              <tr>
                <td class="text-left">
                  <span class="mdi mdi-account-tie mr-2"></span>
                  Camareros
                  <span *ngIf="adminService.waiters.length > 0" class="mdi mdi-check text-success"></span>
                  <span *ngIf="adminService.waiters.length === 0" class="mdi mdi-alert text-danger"></span>
                </td>
                <td class="text-right text-accent">
                  {{ adminService.waiters.length }}
                </td>
              </tr>

              <tr>
                <td class="text-left">
                  <span class="mdi mdi-star mr-2"></span>
                  Encuestas
                  <span *ngIf="adminService.scoreItems.length > 0" class="mdi mdi-check text-success"></span>
                  <span *ngIf="adminService.scoreItems.length === 0" class="mdi mdi-alert text-danger"></span>
                </td>
                <td class="text-right text-accent">
                  {{ adminService.scoreItems.length }}
                </td>
              </tr>

            </table>

          </div>
        </mat-card-content>

      </mat-card>

    </div>

    <div>
      <!-- SETTINGS -->
      <mat-card class="saturno-minicard text-left mb-2 mx-1 pointer">

        <div class="text-info md">
          <span class="mdi mdi-view-module mr-2"></span> Módulos
        </div>

        <mat-card-content>

          <div class="table-responsive-sm text-center mt-2">
            <table class="table-sm mb-0 sm text-center">

              <tr>
                <td class="text-left">
                  <span class="mdi mdi-gesture-double-tap mr-2"></span>
                  SPM
                </td>
                <td class="text-right text-accent">
                  <span *ngIf="publicService.settings?.bl_spm">Activado</span>
                  <span *ngIf="!publicService.settings?.bl_spm">Desactivado</span>
                </td>
              </tr>

              <tr>
                <td class="text-left">
                  <span class="mdi mdi-human-queue mr-2"></span>
                  Cola Virtual
                </td>
                <td class="text-right text-accent">
                  <span *ngIf="publicService.settings?.bl_queue">Activado</span>
                  <span *ngIf="!publicService.settings?.bl_queue">Desactivado</span>
                </td>
              </tr>

              <tr>
                <td class="text-left">
                  <span class="mdi mdi-calendar-account mr-2"></span>
                  Agenda
                </td>
                <td class="text-right text-accent">
                  <span *ngIf="publicService.settings?.bl_schedule">Activado</span>
                  <span *ngIf="!publicService.settings?.bl_schedule">Desactivado</span>
                </td>
              </tr>

            </table>
            <hr>
            <button mat-raised-button color="primary" routerLink="/admin/settings">Ir a Ajustes</button>
          </div>
        </mat-card-content>

      </mat-card>

      <!-- ADMIN & WAITERS -->
      <mat-card class="saturno-minicard text-left mb-2 mx-1" *ngIf="loginService.user.id_company">

        <div class="text-info md">
          <span class="mdi mdi-shield-star mr-2"></span> Administradores y Camareros/as
        </div>

        <div class="my-1">
          Para gestionar mesas y turnos sólo tenés que ir al menú de Camarero/a y tomar
          un sector.
        </div>

      </mat-card>

      <!-- CLIENTS -->

      <mat-card class="saturno-minicard text-left mb-2 mx-1">

        <div class="text-info md">
          <span class="mdi mdi-account mr-2"></span> Clientes
        </div>

        <div class="m-1">
          Tus clientes tienen que entrar en la web saturno.fun y buscar tu Bar / Restaruant.
        </div>

        <a class="m-1 sm" target="_blank" href="https://saturno.fun">
          https://saturno.fun
        </a>

        <div class="m-1">
          También puede usar un link o acceso directo a tu comercio en:
        </div>


        <a class="m-1 sm" target="_blank"
          href="https://saturno.fun/public/page/{{loginService.user.id_company?.tx_company_string || 'nombredetucomercio'}}">
          https://saturno.fun/public/page/{{loginService.user.id_company?.tx_company_string || 'nombredetucomercio'}}
        </a>

      </mat-card>

      <!-- QR CODE -->

      <mat-card class="saturno-minicard text-left mb-2 mx-1" *ngIf="loginService.user.id_company?.tx_company_string">

        <div class="text-info md">
          <span class="mdi mdi-qrcode mr-2"></span> QR
        </div>

        <div class="m-1">
          Podés imprimir este código QR de acceso a tu web y pegarlo en tu comercio:
        </div>

        <div class="m-1 text-center my-4">
          <qrcode
            qrdata="https://saturno.fun/public/{{loginService.user.id_company?.tx_company_string || 'nombredetucomercio'}}"
            [width]="256" [errorCorrectionLevel]="'M'">
          </qrcode>
        </div>

      </mat-card>

    </div>

  </div>

</div>
