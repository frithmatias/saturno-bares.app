<div class="page-container p-2 pt-3 animated fadeIn">


        <!------------------------------>
        <!-- DATE && SECTION FORM -->
        <!------------------------------>
        <mat-card>
            <!-- Form -->
            <form autocomplete="off" ngNativeValidate #formDirective="ngForm" [formGroup]="scheduleForm">

                <mat-form-field color="accent" class="w-50 px-2">
                    <mat-label>Fecha</mat-label>
                    <input matInput [matDatepickerFilter]="myFilter" formControlName="dtSelected" [min]="minDate"
                        [max]="maxDate" [matDatepicker]="picker">
                    <mat-datepicker-toggle matSuffix [for]="picker">
                    </mat-datepicker-toggle>
                    <mat-datepicker [dateClass]="dateClass" #picker></mat-datepicker>
                </mat-form-field>


                <mat-form-field color="accent" class="w-50 px-2">
                    <mat-label>Sector</mat-label>
                    <mat-select formControlName="idSection" name="idSection" required>
                        <mat-option *ngFor="let section of adminService.sections" [value]="section._id">
                            {{ section.tx_section }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

            </form>

            <!-- Pendings by section info -->
            <div *ngIf="!dtSelected" class="sm text-accent text-center">
                Seleccion√° fecha para ver tu agenda.
            </div>

            <div *ngIf="dtSelected && pendingBySectionMap" class="sm">
                <table>
                    <tr class="text-accent">
                        Solicitudes Pendientes para el {{ dtSelected | dateToString | capitalizarPipe}}
                    </tr>
                    <tr *ngFor="let section of adminService.sections">
                        <td>
                            {{ section.tx_section }}
                        </td>
                        <td>
                            {{pendingBySectionMap.get(section.tx_section)}}
                        </td>
                    </tr>
                </table>
            </div>
        </mat-card>

        <!------------------------------>
        <!-- PENDINGS -->
        <!------------------------------>
        <mat-expansion-panel class="my-3" *ngIf="idSection && dtSelected && pending.length > 0">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <span class="lg mdi mdi-account-clock text-deco"></span>
                    <span class="badge text-white bg-primary">{{pending.length}}</span>
                    <span class="sidenav-title-text mx-2 align-self-center md">Solicitudes de Mesa</span>
                </mat-panel-title>
            </mat-expansion-panel-header>

            <!-- PENDING COMPONENT -->
            <app-pending *ngIf="pending.length > 0" [pending]="pending" [availability]="availability"
                (pendingUpdated)="pendingUpdated($event)"></app-pending>

        </mat-expansion-panel>

        <!------------------------------>
        <!-- CALENDAR -->
        <!------------------------------>
        <mat-expansion-panel class="my-3" *ngIf="idSection && dtSelected">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <span class="lg mdi mdi-calendar text-deco"></span>
                    <span class="sidenav-title-text mx-2 align-self-center md">Agenda <span class="text-accent">{{adminService.sectionsMap.get(idSection)}}</span> {{ dtSelected | dateToString | capitalizarPipe}} </span>
                </mat-panel-title>
            </mat-expansion-panel-header>

            <!-- CALENDAR COMPONENT -->
            <app-calendar [availability]="availability" [tables]="tables" [idSection]="idSection"
                (pendingUpdated)="pendingUpdated($event)"></app-calendar>

        </mat-expansion-panel>


</div>